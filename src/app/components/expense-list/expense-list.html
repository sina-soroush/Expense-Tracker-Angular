<div class="expense-list-container">
  <!-- Left Side: Summary/Expenses Section -->
  <div class="left-section">
    <app-summary [expenses]="expenses"></app-summary>
  </div>

  <!-- Center: Header + Filters -->
  <div class="center-section">
    <!-- Header Section -->
    <div class="header">
      <div class="welcome-section">
        <h1>What are you tracking today?</h1>
        <div class="search-bar">
          <div class="search-input-wrapper">
            <lucide-icon [img]="SearchIcon" [size]="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;"></lucide-icon>
            <input type="text" placeholder="Search expenses..." [(ngModel)]="searchQuery" (ngModelChange)="onSearchChange()">
          </div>
        </div>
      </div>
    </div>

    <!-- Add Button -->
    <button routerLink="/add" class="btn btn-primary add-btn-bottom">
      <lucide-icon [img]="PlusIcon" [size]="16"></lucide-icon>
      Add New
    </button>

    <!-- Filters -->
    <div class="filters">
      <div class="filters-row">
        <div class="filter-group">
          <label>Date</label>
          <input 
            #dateFilter
            type="text" 
            id="date-filter" 
            [(ngModel)]="selectedDate" 
            class="filter-input"
            placeholder="Select date">
        </div>

        <div class="filter-group">
          <label>Category</label>
          <ng-select
            id="category-filter"
            [items]="categoryOptions"
            bindLabel="label"
            bindValue="value"
            [(ngModel)]="selectedCategory"
            (ngModelChange)="onCategoryChange()"
            placeholder="All Categories"
            [clearable]="false"
            [searchable]="false">
            <ng-template ng-label-tmp let-item="item">
              <span class="category-label" *ngIf="item">
                <span class="category-icon" *ngIf="item.icon">
                  <lucide-icon [img]="item.icon" [size]="16"></lucide-icon>
                </span>
                <span class="category-text">{{ item.label }}</span>
              </span>
            </ng-template>
            <ng-template ng-option-tmp let-item="item">
              <div class="category-option">
                <span class="category-icon" *ngIf="item.icon">
                  <lucide-icon [img]="item.icon" [size]="16"></lucide-icon>
                </span>
                <span class="category-text">{{ item.label }}</span>
              </div>
            </ng-template>
          </ng-select>
        </div>
      </div>

      <button 
        *ngIf="selectedCategory !== 'all' || selectedDate" 
        (click)="clearFilters()" 
        class="btn btn-secondary clear-btn">
        Clear Filters
      </button>
    </div>
  </div>

  <!-- Right Side: Expense Cards -->
  <div class="right-section">
    <div class="expenses-container">
      <div *ngIf="filteredExpenses.length === 0" class="empty-state">
        <p class="empty-message">No expenses found</p>
        <p class="empty-hint">
          {{ expenses.length === 0 ? 'Start by adding your first expense!' : 'Try adjusting your filters' }}
        </p>
      </div>

      <div *ngIf="filteredExpenses.length > 0" class="expense-grid">
        <app-expense-item 
          *ngFor="let expense of filteredExpenses; trackBy: trackByExpenseId"
          [expense]="expense"
          (delete)="onDeleteExpense($event)">
        </app-expense-item>
      </div>
    </div>
  </div>
</div>
